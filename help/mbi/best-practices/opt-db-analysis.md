---
title: 最佳化資料庫以進行分析
description: 瞭解如何最佳化資料庫以供分析。
exl-id: e73e1a1e-c933-476d-97bc-bd8f52bb2fa1
source-git-commit: c7f6bacd49487cd13c4347fe6dd46d6a10613942
workflow-type: tm+mt
source-wordcount: '872'
ht-degree: 0%

---

# 最佳化您的資料庫

使用作業資料庫的主要優點 [!DNL Adobe Commerce Intelligence] 收集資料不需要建置或修改任何專案。 重要資訊已備妥，您只需要解除鎖定即可。

本主題包含一些建議，可協助您最佳化資料庫以進行分析，以及從原始資料中得出可操作分析。

## 不要刪除資料

>[!TIP]
>
>影響您企業（以及您自己的服務條款）的當地及國際法律規範可能會影響您可以保留的資料型別以及保留時間。 遵守這些法規應該是您的首要任務。

當訂單被取消、使用者停用其帳戶或產品被中止時，很想刪除資料庫中的相關資訊。 增加表格數量並消除雜亂似乎是個明智的作法。 不過，刪除列表示此資訊會永遠遺失，或是您需要透過舊備份來尋找它。

反之，您可以將狀態列新增至表格，指出資料列何時不再作用中或相關。 此外，也建議新增欄以儲存進行變更的日期，或建立歷史變更的記錄。 如果表格變得足夠大，以至於效能開始受影響，請考慮將舊資料封存到用於分析的表格。

## 很少覆寫資料

應謹慎覆寫資料。

許多公司以登入日期為例，會儲存上次登入日期，而非歷史登入表格。 雖然您可能只需要上次登入日期的功能用途，但從分析角度來看，該被覆寫資料會造成巨大損失。 不保留這些動作的完整記錄，便無法檢視有多少使用者長時間離開後又重新啟用。 此外，也無法根據登入次數建立使用者參與同類群組分析等專案。

一般而言，如果您因某種使用者動作而更新記錄，請勿覆寫有關先前或個別使用者動作的資訊。

## 包含 `Updated_at` 一段時間內更新的資料欄

例如，如果表格的列會隨著時間而改變值， **order\_status** 變更來源`processing` 至 `complete`，包括 **已更新\_at** 欄以記錄最新變更的發生時間。 確保 **已更新\_at** 值可在首次插入新資料列時使用，當 **已更新\_at** 日期對應至 **created\_at** 日期。

除了針對分析最佳化， **已更新\_at** 欄也可讓您使用 [增量複製方法](../data-analyst/data-warehouse-mgr/cfg-replication-methods.md)，這有助於縮短更新週期的長度。

## 存放區使用者贏取來源

最常見的錯誤之一是 [使用者贏取來源](../data-analyst/analysis/google-track-user-acq.md) (UAS)未儲存在作業資料庫中。 在大多數情況下，當這是問題時，只會透過追蹤UAS [!DNL Google Analytics] 或是其他網站分析工具。 雖然這些工具可能很有價值，但僅將UAS儲存在其中有一些缺點；例如，您無法從這些工具擷取使用者層級的資料。 如果可能的話，這通常是一個困難的過程。 取得此資訊並將其與其他來源的資料（例如也儲存在資料庫中的行為和交易式資訊）結合，應該會很容易。

將UAS儲存在您自己的資料庫中，通常是線上企業對其分析能力所能做的最大改進。 這可讓UAS分析銷售額、使用者參與度、回收期、客戶期限值、流失率和其他關鍵量度。 [在決定要將行銷資源投資於何處時，此資料至關重要](../data-analyst/analysis/most-value-source-channel.md).

太多公司只關注尋找以最低成本提供新使用者的管道。 如果您沒有追蹤從每個管道取得的使用者品質，就有可能吸引未帶來商業價值的使用者。

## 資料表格設定

### 設定主索引鍵

A [主索引鍵](https://en.wikipedia.org/wiki/Unique_key) 是不變更的欄（或一組欄），會在表格中產生唯一值。 主索引鍵非常重要，因為它們可確保您的表格在中正確複製 [!DNL Commerce Intelligence].

建立主索引鍵時，請為自動增加的欄使用整數資料型別。 Adobe建議您儘可能避免使用多欄主索引鍵。

如果您的表格是SQL檢視，請新增可以當做主索引鍵的資料行。 [!DNL Commerce Intelligence] 能夠自動將此欄識別為主索引鍵。

### 指派資料型別至您的資料欄

如果資料欄未指派 [資料型別](https://en.wikipedia.org/wiki/Data_type)， [!DNL Commerce Intelligence] 猜想要使用的資料型別。 如果系統猜想不正確，在Adobe支援團隊將欄調整為適當的資料型別之前，您可能無法執行相關的分析。 例如，如果日期欄被猜為數值資料型別，您可以使用日期維度來分析一段時間內的趨勢。

### 如果您有多個資料庫，請在資料表格中新增前置詞

如果您有一個以上的資料庫連線到 [!DNL Commerce Intelligence]，Adobe建議您為表格新增首碼以避免混淆。 字首可協助您記住量度或資料維度的來源位置。
