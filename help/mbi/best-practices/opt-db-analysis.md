---
title: 優化資料庫以進行分析
description: 瞭解如何優化資料庫以進行分析。
exl-id: e73e1a1e-c933-476d-97bc-bd8f52bb2fa1
source-git-commit: c7f6bacd49487cd13c4347fe6dd46d6a10613942
workflow-type: tm+mt
source-wordcount: '872'
ht-degree: 0%

---

# 優化資料庫

使用操作資料庫的主要好處 [!DNL Adobe Commerce Intelligence] 即無需構建或修改任何內容即可收集資料。 有價值的資訊已經存在 — 您只需解鎖它。

本主題包含一些建議，幫助您優化資料庫以便進行分析，並從原始資料中得出可操作的見解。

## 不刪除資料

>[!TIP]
>
>影響您的業務（以及您自己的服務條款）的本地和國際法律可能會影響您可以保留哪些類型的資料以及您保留資料的時間。 遵守這些法律應是您的首要任務。

當訂單被取消、用戶停用其帳戶或產品停止時，很容易刪除資料庫中的關聯資訊。 桌子越來越多，消除雜亂似乎是一個審慎的想法。 但是，刪除行意味著此資訊將永遠丟失，或者您需要挖掘舊備份才能找到它。

相反，您可以向表中添加一個狀態列，該列指示行何時不再處於活動狀態或不再相關。 還建議添加一列來儲存更改的日期，或為歷史更改建立日誌。 如果表的規模增長到足以開始影響效能，請考慮將舊資料存檔到用於分析的表中。

## 很少覆蓋資料

覆蓋資料應謹慎而謹慎。

以登錄日期為例，許多公司都儲存上次登錄日期，而不是歷史登錄表。 雖然您可能只需要最後一次登錄日期才能實現功能，但從分析的角度看，覆蓋的資料是一大損失。 不保留這些操作的完整日誌，就無法查看有多少用戶長時間離開並重新激活。 它還使得無法根據登錄資訊構建用戶參與隊列分析等內容。

通常，如果由於某種用戶操作而更新記錄，則不要覆蓋有關先前或單獨用戶操作的資訊。

## 包括 `Updated_at` 隨時間更新的資料列

如果表的行會隨時間而改變值，例如， **順序\_狀態** 更改`processing` 至 `complete`，包括 **更新\_at** 欄，記錄最新更改的時間。 確保 **更新\_at** 值在首次插入新資料行時(當 **更新\_at** 日期與 **建立\_at** 日期。

除了優化分析， **更新\_at** 列還允許您使用 [增量複製方法](../data-analyst/data-warehouse-mgr/cfg-replication-methods.md)，這有助於縮短更新週期的長度。

## 儲存用戶獲取源

最常見的錯誤之一是 [用戶獲取源](../data-analyst/analysis/google-track-user-acq.md) (UAS)未儲存在操作資料庫中。 在大多數情況下，如果出現此問題，則只能跟蹤UAS [!DNL Google Analytics] 或其他網路分析工具。 雖然這些工具可能很有價值，但將UAS完全儲存在它們中有一些缺陷；例如，不能從這些工具中提取用戶級資料。 有可能時，通常是一個困難的過程。 應該很容易地獲取此資訊，並將其與來自其他來源的資料進行關聯，例如也儲存在資料庫中的行為和事務性資訊。

將UAS儲存到您自己的資料庫中通常是線上業務對其分析能力所能做出的最大改進。 這允許UAS對銷售、用戶參與、回收期、客戶生存期價值、流失和其他關鍵指標進行分析。 [在決定將營銷資源投入何處時，此資料至關重要](../data-analyst/analysis/most-value-source-channel.md)。

太多的公司只專注於尋找以最低成本提供新用戶的渠道。 如果您沒有跟蹤從每個渠道獲取的用戶的質量，則會面臨吸引不產生業務價值的用戶的風險。

## 資料表設定

### 設定主鍵

A [主鍵](https://en.wikipedia.org/wiki/Unique_key) 是不改變的列（或一組列），在表中生成唯一值。 主鍵非常重要，因為它們確保在中正確複製表 [!DNL Commerce Intelligence]。

生成主鍵時，對自動增加的列使用整數資料類型。 Adobe建議盡量避免使用多列主鍵。

如果表是SQL視圖，請添加可用作主鍵的列。 [!DNL Commerce Intelligence] 能夠自動將此列標識為主鍵。

### 為資料列分配資料類型

如果資料列未分配 [資料類型](https://en.wikipedia.org/wiki/Data_type)。 [!DNL Commerce Intelligence] 猜測要使用的資料類型。 如果系統猜錯了，則在Adobe支援團隊將列調整為適當的資料類型之前，您可能無法執行相關分析。 例如，如果日期列被猜為數字資料類型，則可以使用該日期維度隨時間趨勢。

### 如果有多個資料庫，則向資料表添加前置詞

如果連接了多個資料庫 [!DNL Commerce Intelligence],Adobe建議您向表添加前置詞以避免混淆。 前置詞有助於您記住度量或資料維的來源。
